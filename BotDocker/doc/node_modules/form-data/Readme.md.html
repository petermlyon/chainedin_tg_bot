<!DOCTYPE html>
<html>
<head>
  <title>Readme.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/form-data/Readme.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#form-data">Form-Data  </a>
      </div>

      <div class="heading h2">
        <a href="#install">Install</a>
      </div>

      <div class="heading h2">
        <a href="#usage">Usage</a>
      </div>

      <div class="heading h3">
        <a href="#custom-options">Custom options</a>
      </div>

      <div class="heading h3">
        <a href="#alternative-submission-methods">Alternative submission methods</a>
      </div>

      <div class="heading h3">
        <a href="#methods">Methods</a>
      </div>

      <div class="heading h4">
        <a href="#void-append-string-field-mixed-value-mixed-options">Void append( String field, Mixed value [, Mixed options] )</a>
      </div>

      <div class="heading h4">
        <a href="#headers-getheaders-headers-userheaders">Headers getHeaders( [Headers userHeaders] )</a>
      </div>

      <div class="heading h4">
        <a href="#string-getboundary">String getBoundary()</a>
      </div>

      <div class="heading h4">
        <a href="#void-setboundary-string-boundary">Void setBoundary(String boundary)</a>
      </div>

      <div class="heading h4">
        <a href="#buffer-getbuffer">Buffer getBuffer()</a>
      </div>

      <div class="heading h4">
        <a href="#integer-getlengthsync">Integer getLengthSync()</a>
      </div>

      <div class="heading h4">
        <a href="#integer-getlength-function-callback">Integer getLength( function callback )</a>
      </div>

      <div class="heading h4">
        <a href="#boolean-hasknownlength">Boolean hasKnownLength()</a>
      </div>

      <div class="heading h4">
        <a href="#request-submit-params-function-callback">Request submit( params, function callback )</a>
      </div>

      <div class="heading h4">
        <a href="#string-tostring">String toString()</a>
      </div>

      <div class="heading h3">
        <a href="#integration-with-other-libraries">Integration with other libraries</a>
      </div>

      <div class="heading h4">
        <a href="#request">Request</a>
      </div>

      <div class="heading h4">
        <a href="#node-fetch">node-fetch</a>
      </div>

      <div class="heading h4">
        <a href="#axios">axios</a>
      </div>

      <div class="heading h2">
        <a href="#notes">Notes</a>
      </div>

      <div class="heading h2">
        <a href="#license">License</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="form-data">
  <h1>
    <a href="#form-data" name="form-data" class="pilcrow"></a>
Form-Data <a href="https://www.npmjs.com/package/form-data"><img src="https://img.shields.io/npm/v/form-data.svg" alt="NPM Module"></a> <a href="https://gitter.im/form-data/form-data"><img src="http://form-data.github.io/images/gitterbadge.svg" alt="Join the chat at https://gitter.im/form-data/form-data"></a>
  </h1>
</div>
<p>A library to create readable <code>&quot;multipart/form-data&quot;</code> streams. Can be used to submit forms and file uploads to other web applications.</p>
<p>The API of this library is inspired by the <a href="http://dev.w3.org/2006/webapi/XMLHttpRequest-2/Overview.html#the-formdata-interface">XMLHttpRequest-2 FormData Interface</a>.</p>
<p><a href="https://travis-ci.org/form-data/form-data"><img src="https://img.shields.io/travis/form-data/form-data/v4.0.0.svg?label=linux:6.x-12.x" alt="Linux Build"></a>
<a href="https://travis-ci.org/form-data/form-data"><img src="https://img.shields.io/travis/form-data/form-data/v4.0.0.svg?label=macos:6.x-12.x" alt="MacOS Build"></a>
<a href="https://travis-ci.org/form-data/form-data"><img src="https://img.shields.io/travis/form-data/form-data/v4.0.0.svg?label=windows:6.x-12.x" alt="Windows Build"></a></p>
<p><a href="https://coveralls.io/github/form-data/form-data?branch=master"><img src="https://img.shields.io/coveralls/form-data/form-data/v4.0.0.svg?label=code+coverage" alt="Coverage Status"></a>
<a href="https://david-dm.org/form-data/form-data"><img src="https://img.shields.io/david/form-data/form-data.svg" alt="Dependency Status"></a></p>
<div class="pilwrap" id="install">
  <h2>
    <a href="#install" name="install" class="pilcrow"></a>
Install
  </h2>
</div>
<pre><code>npm install --save form-data
</code></pre>
<div class="pilwrap" id="usage">
  <h2>
    <a href="#usage" name="usage" class="pilcrow"></a>
Usage
  </h2>
</div>
<p>In this example we are constructing a form with 3 fields that contain a string,
a buffer and a file stream.</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> FormData = <span class="hljs-built_in">require</span>(<span class="hljs-string">'form-data'</span>);
<span class="hljs-keyword">var</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-keyword">var</span> form = <span class="hljs-keyword">new</span> FormData();
form.append(<span class="hljs-string">'my_field'</span>, <span class="hljs-string">'my value'</span>);
form.append(<span class="hljs-string">'my_buffer'</span>, <span class="hljs-keyword">new</span> Buffer(<span class="hljs-number">10</span>));
form.append(<span class="hljs-string">'my_file'</span>, fs.createReadStream(<span class="hljs-string">'/foo/bar.jpg'</span>));
</code></pre>
<p>Also you can use http-response stream:</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> FormData = <span class="hljs-built_in">require</span>(<span class="hljs-string">'form-data'</span>);
<span class="hljs-keyword">var</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);

<span class="hljs-keyword">var</span> form = <span class="hljs-keyword">new</span> FormData();

http.request(<span class="hljs-string">'http://nodejs.org/images/logo.png'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
  form.append(<span class="hljs-string">'my_field'</span>, <span class="hljs-string">'my value'</span>);
  form.append(<span class="hljs-string">'my_buffer'</span>, <span class="hljs-keyword">new</span> Buffer(<span class="hljs-number">10</span>));
  form.append(<span class="hljs-string">'my_logo'</span>, response);
});
</code></pre>
<p>Or @mikeal's <a href="https://github.com/request/request">request</a> stream:</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> FormData = <span class="hljs-built_in">require</span>(<span class="hljs-string">'form-data'</span>);
<span class="hljs-keyword">var</span> request = <span class="hljs-built_in">require</span>(<span class="hljs-string">'request'</span>);

<span class="hljs-keyword">var</span> form = <span class="hljs-keyword">new</span> FormData();

form.append(<span class="hljs-string">'my_field'</span>, <span class="hljs-string">'my value'</span>);
form.append(<span class="hljs-string">'my_buffer'</span>, <span class="hljs-keyword">new</span> Buffer(<span class="hljs-number">10</span>));
form.append(<span class="hljs-string">'my_logo'</span>, request(<span class="hljs-string">'http://nodejs.org/images/logo.png'</span>));
</code></pre>
<p>In order to submit this form to a web application, call <code>submit(url, [callback])</code> method:</p>
<pre><code class="javascript">form.submit(<span class="hljs-string">'http://example.org/'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
  <span class="hljs-comment">// res – response object (http.IncomingMessage)  //</span>
  res.resume();
});

</code></pre>
<p>For more advanced request manipulations <code>submit()</code> method returns <code>http.ClientRequest</code> object, or you can choose from one of the alternative submission methods.</p>
<div class="pilwrap" id="custom-options">
  <h3>
    <a href="#custom-options" name="custom-options" class="pilcrow"></a>
Custom options
  </h3>
</div>
<p>You can provide custom options, such as <code>maxDataSize</code>:</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> FormData = <span class="hljs-built_in">require</span>(<span class="hljs-string">'form-data'</span>);

<span class="hljs-keyword">var</span> form = <span class="hljs-keyword">new</span> FormData({ <span class="hljs-attr">maxDataSize</span>: <span class="hljs-number">20971520</span> });
form.append(<span class="hljs-string">'my_field'</span>, <span class="hljs-string">'my value'</span>);
form.append(<span class="hljs-string">'my_buffer'</span>, <span class="hljs-comment">/* something big */</span>);
</code></pre>
<p>List of available options could be found in <a href="https://github.com/felixge/node-combined-stream/blob/master/lib/combined_stream.js#L7-L15">combined-stream</a></p>
<div class="pilwrap" id="alternative-submission-methods">
  <h3>
    <a href="#alternative-submission-methods" name="alternative-submission-methods" class="pilcrow"></a>
Alternative submission methods
  </h3>
</div>
<p>You can use node's http client interface:</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);

<span class="hljs-keyword">var</span> request = http.request({
  <span class="hljs-attr">method</span>: <span class="hljs-string">'post'</span>,
  <span class="hljs-attr">host</span>: <span class="hljs-string">'example.org'</span>,
  <span class="hljs-attr">path</span>: <span class="hljs-string">'/upload'</span>,
  <span class="hljs-attr">headers</span>: form.getHeaders()
});

form.pipe(request);

request.on(<span class="hljs-string">'response'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
  <span class="hljs-built_in">console</span>.log(res.statusCode);
});
</code></pre>
<p>Or if you would prefer the <code>'Content-Length'</code> header to be set for you:</p>
<pre><code class="javascript">form.submit(<span class="hljs-string">'example.org/upload'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
  <span class="hljs-built_in">console</span>.log(res.statusCode);
});
</code></pre>
<p>To use custom headers and pre-known length in parts:</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> CRLF = <span class="hljs-string">'\r\n'</span>;
<span class="hljs-keyword">var</span> form = <span class="hljs-keyword">new</span> FormData();

<span class="hljs-keyword">var</span> options = {
  <span class="hljs-attr">header</span>: CRLF + <span class="hljs-string">'--'</span> + form.getBoundary() + CRLF + <span class="hljs-string">'X-Custom-Header: 123'</span> + CRLF + CRLF,
  <span class="hljs-attr">knownLength</span>: <span class="hljs-number">1</span>
};

form.append(<span class="hljs-string">'my_buffer'</span>, buffer, options);

form.submit(<span class="hljs-string">'http://example.com/'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Done'</span>);
});
</code></pre>
<p>Form-Data can recognize and fetch all the required information from common types of streams (<code>fs.readStream</code>, <code>http.response</code> and <code>mikeal's request</code>), for some other types of streams you'd need to provide &quot;file&quot;-related information manually:</p>
<pre><code class="javascript">someModule.stream(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, stdout, stderr</span>) </span>{
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;

  <span class="hljs-keyword">var</span> form = <span class="hljs-keyword">new</span> FormData();

  form.append(<span class="hljs-string">'file'</span>, stdout, {
    <span class="hljs-attr">filename</span>: <span class="hljs-string">'unicycle.jpg'</span>, <span class="hljs-comment">// ... or:</span>
    <span class="hljs-attr">filepath</span>: <span class="hljs-string">'photos/toys/unicycle.jpg'</span>,
    <span class="hljs-attr">contentType</span>: <span class="hljs-string">'image/jpeg'</span>,
    <span class="hljs-attr">knownLength</span>: <span class="hljs-number">19806</span>
  });

  form.submit(<span class="hljs-string">'http://example.com/'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Done'</span>);
  });
});
</code></pre>
<p>The <code>filepath</code> property overrides <code>filename</code> and may contain a relative path. This is typically used when uploading <a href="https://wicg.github.io/entries-api/#dom-htmlinputelement-webkitdirectory">multiple files from a directory</a>.</p>
<p>For edge cases, like POST request to URL with query string or to pass HTTP auth credentials, object can be passed to <code>form.submit()</code> as first parameter:</p>
<pre><code class="javascript">form.submit({
  <span class="hljs-attr">host</span>: <span class="hljs-string">'example.com'</span>,
  <span class="hljs-attr">path</span>: <span class="hljs-string">'/probably.php?extra=params'</span>,
  <span class="hljs-attr">auth</span>: <span class="hljs-string">'username:password'</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
  <span class="hljs-built_in">console</span>.log(res.statusCode);
});
</code></pre>
<p>In case you need to also send custom HTTP headers with the POST request, you can use the <code>headers</code> key in first parameter of <code>form.submit()</code>:</p>
<pre><code class="javascript">form.submit({
  <span class="hljs-attr">host</span>: <span class="hljs-string">'example.com'</span>,
  <span class="hljs-attr">path</span>: <span class="hljs-string">'/surelynot.php'</span>,
  <span class="hljs-attr">headers</span>: {<span class="hljs-string">'x-test-header'</span>: <span class="hljs-string">'test-header-value'</span>}
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
  <span class="hljs-built_in">console</span>.log(res.statusCode);
});
</code></pre>
<div class="pilwrap" id="methods">
  <h3>
    <a href="#methods" name="methods" class="pilcrow"></a>
Methods
  </h3>
</div>
<ul>
<li><a href="https://github.com/form-data/form-data#void-append-string-field-mixed-value--mixed-options-"><em>Void</em> append( <strong>String</strong> <em>field</em>, <strong>Mixed</strong> <em>value</em> [, <strong>Mixed</strong> <em>options</em>] )</a>.</li>
<li><a href="https://github.com/form-data/form-data#array-getheaders-array-userheaders-"><em>Headers</em> getHeaders( [<strong>Headers</strong> <em>userHeaders</em>] )</a></li>
<li><a href="https://github.com/form-data/form-data#string-getboundary"><em>String</em> getBoundary()</a></li>
<li><a href="https://github.com/form-data/form-data#void-setboundary"><em>Void</em> setBoundary()</a></li>
<li><a href="https://github.com/form-data/form-data#buffer-getbuffer"><em>Buffer</em> getBuffer()</a></li>
<li><a href="https://github.com/form-data/form-data#integer-getlengthsync"><em>Integer</em> getLengthSync()</a></li>
<li><a href="https://github.com/form-data/form-data#integer-getlength-function-callback-"><em>Integer</em> getLength( <strong>function</strong> <em>callback</em> )</a></li>
<li><a href="https://github.com/form-data/form-data#boolean-hasknownlength"><em>Boolean</em> hasKnownLength()</a></li>
<li><a href="https://github.com/form-data/form-data#request-submit-params-function-callback-"><em>Request</em> submit( <em>params</em>, <strong>function</strong> <em>callback</em> )</a></li>
<li><a href="https://github.com/form-data/form-data#string-tostring"><em>String</em> toString()</a></li>
</ul>
<div class="pilwrap" id="void-append-string-field-mixed-value-mixed-options">
  <h4>
    <a href="#void-append-string-field-mixed-value-mixed-options" name="void-append-string-field-mixed-value-mixed-options" class="pilcrow"></a>
<em>Void</em> append( <strong>String</strong> <em>field</em>, <strong>Mixed</strong> <em>value</em> [, <strong>Mixed</strong> <em>options</em>] )
  </h4>
</div>
<p>Append data to the form. You can submit about any format (string, integer, boolean, buffer, etc.). However, Arrays are not supported and need to be turned into strings by the user.</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> form = <span class="hljs-keyword">new</span> FormData();
form.append( <span class="hljs-string">'my_string'</span>, <span class="hljs-string">'my value'</span> );
form.append( <span class="hljs-string">'my_integer'</span>, <span class="hljs-number">1</span> );
form.append( <span class="hljs-string">'my_boolean'</span>, <span class="hljs-literal">true</span> );
form.append( <span class="hljs-string">'my_buffer'</span>, <span class="hljs-keyword">new</span> Buffer(<span class="hljs-number">10</span>) );
form.append( <span class="hljs-string">'my_array_as_json'</span>, <span class="hljs-built_in">JSON</span>.stringify( [<span class="hljs-string">'bird'</span>,<span class="hljs-string">'cute'</span>] ) )
</code></pre>
<p>You may provide a string for options, or an object.</p>
<pre><code class="javascript"><span class="hljs-comment">// Set filename by providing a string for options</span>
form.append( <span class="hljs-string">'my_file'</span>, fs.createReadStream(<span class="hljs-string">'/foo/bar.jpg'</span>), <span class="hljs-string">'bar.jpg'</span> );

<span class="hljs-comment">// provide an object.</span>
form.append( <span class="hljs-string">'my_file'</span>, fs.createReadStream(<span class="hljs-string">'/foo/bar.jpg'</span>), {<span class="hljs-attr">filename</span>: <span class="hljs-string">'bar.jpg'</span>, <span class="hljs-attr">contentType</span>: <span class="hljs-string">'image/jpeg'</span>, <span class="hljs-attr">knownLength</span>: <span class="hljs-number">19806</span>} );
</code></pre>
<div class="pilwrap" id="headers-getheaders-headers-userheaders">
  <h4>
    <a href="#headers-getheaders-headers-userheaders" name="headers-getheaders-headers-userheaders" class="pilcrow"></a>
<em>Headers</em> getHeaders( [<strong>Headers</strong> <em>userHeaders</em>] )
  </h4>
</div>
<p>This method adds the correct <code>content-type</code> header to the provided array of <code>userHeaders</code>.</p>
<div class="pilwrap" id="string-getboundary">
  <h4>
    <a href="#string-getboundary" name="string-getboundary" class="pilcrow"></a>
<em>String</em> getBoundary()
  </h4>
</div>
<p>Return the boundary of the formData. By default, the boundary consists of 26 <code>-</code> followed by 24 numbers
for example:</p>
<pre><code class="javascript">-------------------------<span class="hljs-number">-515890814546601021194782</span>
</code></pre>
<div class="pilwrap" id="void-setboundary-string-boundary">
  <h4>
    <a href="#void-setboundary-string-boundary" name="void-setboundary-string-boundary" class="pilcrow"></a>
<em>Void</em> setBoundary(String <em>boundary</em>)
  </h4>
</div>
<p>Set the boundary string, overriding the default behavior described above.</p>
<p><em>Note: The boundary must be unique and may not appear in the data.</em></p>
<div class="pilwrap" id="buffer-getbuffer">
  <h4>
    <a href="#buffer-getbuffer" name="buffer-getbuffer" class="pilcrow"></a>
<em>Buffer</em> getBuffer()
  </h4>
</div>
<p>Return the full formdata request package, as a Buffer. You can insert this Buffer in e.g. Axios to send multipart data.</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> form = <span class="hljs-keyword">new</span> FormData();
form.append( <span class="hljs-string">'my_buffer'</span>, Buffer.from([<span class="hljs-number">0x4a</span>,<span class="hljs-number">0x42</span>,<span class="hljs-number">0x20</span>,<span class="hljs-number">0x52</span>,<span class="hljs-number">0x6f</span>,<span class="hljs-number">0x63</span>,<span class="hljs-number">0x6b</span>,<span class="hljs-number">0x73</span>]) );
form.append( <span class="hljs-string">'my_file'</span>, fs.readFileSync(<span class="hljs-string">'/foo/bar.jpg'</span>) );

axios.post( <span class="hljs-string">'https://example.com/path/to/api'</span>,
            form.getBuffer(),
            form.getHeaders()
          )
</code></pre>
<p><strong>Note:</strong> Because the output is of type Buffer, you can only append types that are accepted by Buffer: <em>string, Buffer, ArrayBuffer, Array, or Array-like Object</em>. A ReadStream for example will result in an error.</p>
<div class="pilwrap" id="integer-getlengthsync">
  <h4>
    <a href="#integer-getlengthsync" name="integer-getlengthsync" class="pilcrow"></a>
<em>Integer</em> getLengthSync()
  </h4>
</div>
<p>Same as <code>getLength</code> but synchronous.</p>
<p><em>Note: getLengthSync <strong>doesn't</strong> calculate streams length.</em></p>
<div class="pilwrap" id="integer-getlength-function-callback">
  <h4>
    <a href="#integer-getlength-function-callback" name="integer-getlength-function-callback" class="pilcrow"></a>
<em>Integer</em> getLength( <strong>function</strong> <em>callback</em> )
  </h4>
</div>
<p>Returns the <code>Content-Length</code> async. The callback is used to handle errors and continue once the length has been calculated</p>
<pre><code class="javascript"><span class="hljs-keyword">this</span>.getLength(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, length</span>) </span>{
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">this</span>._error(err);
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// add content length</span>
  request.setHeader(<span class="hljs-string">'Content-Length'</span>, length);

  ...
}.bind(<span class="hljs-keyword">this</span>));
</code></pre>
<div class="pilwrap" id="boolean-hasknownlength">
  <h4>
    <a href="#boolean-hasknownlength" name="boolean-hasknownlength" class="pilcrow"></a>
<em>Boolean</em> hasKnownLength()
  </h4>
</div>
<p>Checks if the length of added values is known.</p>
<div class="pilwrap" id="request-submit-params-function-callback">
  <h4>
    <a href="#request-submit-params-function-callback" name="request-submit-params-function-callback" class="pilcrow"></a>
<em>Request</em> submit( <em>params</em>, <strong>function</strong> <em>callback</em> )
  </h4>
</div>
<p>Submit the form to a web application.</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> form = <span class="hljs-keyword">new</span> FormData();
form.append( <span class="hljs-string">'my_string'</span>, <span class="hljs-string">'Hello World'</span> );

form.submit( <span class="hljs-string">'http://example.com/'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
  <span class="hljs-comment">// res – response object (http.IncomingMessage)  //</span>
  res.resume();
} );
</code></pre>
<div class="pilwrap" id="string-tostring">
  <h4>
    <a href="#string-tostring" name="string-tostring" class="pilcrow"></a>
<em>String</em> toString()
  </h4>
</div>
<p>Returns the form data as a string. Don't use this if you are sending files or buffers, use <code>getBuffer()</code> instead.</p>
<div class="pilwrap" id="integration-with-other-libraries">
  <h3>
    <a href="#integration-with-other-libraries" name="integration-with-other-libraries" class="pilcrow"></a>
Integration with other libraries
  </h3>
</div>
<div class="pilwrap" id="request">
  <h4>
    <a href="#request" name="request" class="pilcrow"></a>
Request
  </h4>
</div>
<p>Form submission using  <a href="https://github.com/request/request">request</a>:</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> formData = {
  <span class="hljs-attr">my_field</span>: <span class="hljs-string">'my_value'</span>,
  <span class="hljs-attr">my_file</span>: fs.createReadStream(__dirname + <span class="hljs-string">'/unicycle.jpg'</span>),
};

request.post({<span class="hljs-attr">url</span>:<span class="hljs-string">'http://service.com/upload'</span>, <span class="hljs-attr">formData</span>: formData}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, httpResponse, body</span>) </span>{
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'upload failed:'</span>, err);
  }
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Upload successful!  Server responded with:'</span>, body);
});
</code></pre>
<p>For more details see <a href="https://github.com/request/request#multipartform-data-multipart-form-uploads">request readme</a>.</p>
<div class="pilwrap" id="node-fetch">
  <h4>
    <a href="#node-fetch" name="node-fetch" class="pilcrow"></a>
node-fetch
  </h4>
</div>
<p>You can also submit a form using <a href="https://github.com/bitinn/node-fetch">node-fetch</a>:</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> form = <span class="hljs-keyword">new</span> FormData();

form.append(<span class="hljs-string">'a'</span>, <span class="hljs-number">1</span>);

fetch(<span class="hljs-string">'http://example.com'</span>, { <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>, <span class="hljs-attr">body</span>: form })
    .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
        <span class="hljs-keyword">return</span> res.json();
    }).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">json</span>) </span>{
        <span class="hljs-built_in">console</span>.log(json);
    });
</code></pre>
<div class="pilwrap" id="axios">
  <h4>
    <a href="#axios" name="axios" class="pilcrow"></a>
axios
  </h4>
</div>
<p>In Node.js you can post a file using <a href="https://github.com/axios/axios">axios</a>:</p>
<pre><code class="javascript"><span class="hljs-keyword">const</span> form = <span class="hljs-keyword">new</span> FormData();
<span class="hljs-keyword">const</span> stream = fs.createReadStream(PATH_TO_FILE);

form.append(<span class="hljs-string">'image'</span>, stream);

<span class="hljs-comment">// In Node.js environment you need to set boundary in the header field 'Content-Type' by calling method `getHeaders`</span>
<span class="hljs-keyword">const</span> formHeaders = form.getHeaders();

axios.post(<span class="hljs-string">'http://example.com'</span>, form, {
  <span class="hljs-attr">headers</span>: {
    ...formHeaders,
  },
})
.then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response)
.catch(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> error)
</code></pre>
<div class="pilwrap" id="notes">
  <h2>
    <a href="#notes" name="notes" class="pilcrow"></a>
Notes
  </h2>
</div>
<ul>
<li><code>getLengthSync()</code> method DOESN'T calculate length for streams, use <code>knownLength</code> options as workaround.</li>
<li><code>getLength(cb)</code> will send an error as first parameter of callback if stream length cannot be calculated (e.g. send in custom streams w/o using <code>knownLength</code>).</li>
<li><code>submit</code> will not add <code>content-length</code> if form length is unknown or not calculable.</li>
<li>Starting version <code>2.x</code> FormData has dropped support for <code>node@0.10.x</code>.</li>
<li>Starting version <code>3.x</code> FormData has dropped support for <code>node@4.x</code>.</li>
</ul>
<div class="pilwrap" id="license">
  <h2>
    <a href="#license" name="license" class="pilcrow"></a>
License
  </h2>
</div>
<p>Form-Data is released under the <a href="License.html">MIT</a> license.</p>
</div>
  </div>
</body>
</html>
