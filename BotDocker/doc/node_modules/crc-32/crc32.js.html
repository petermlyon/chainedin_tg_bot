<!DOCTYPE html>
<html>
<head>
  <title>crc32.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/crc-32/crc32.js";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>crc32.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>
<div class="dox">
<div class="summary">
<p>! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com<br>
/* vim: set ts=2: */</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-comment">/*exported CRC32 */</span>
<span class="hljs-keyword">var</span> CRC32;
(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">factory</span>) </span>{
	<span class="hljs-comment">/*jshint ignore:start */</span>
	<span class="hljs-comment">/*eslint-disable */</span>
	<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> DO_NOT_EXPORT_CRC === <span class="hljs-string">'undefined'</span>) {
		<span class="hljs-keyword">if</span>(<span class="hljs-string">'object'</span> === <span class="hljs-keyword">typeof</span> exports) {
			factory(exports);
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">'function'</span> === <span class="hljs-keyword">typeof</span> define &amp;&amp; define.amd) {
			define(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">var</span> <span class="hljs-built_in">module</span> = {};
				factory(<span class="hljs-built_in">module</span>);
				<span class="hljs-keyword">return</span> <span class="hljs-built_in">module</span>;
			});
		} <span class="hljs-keyword">else</span> {
			factory(CRC32 = {});
		}
	} <span class="hljs-keyword">else</span> {
		factory(CRC32 = {});
	}
	<span class="hljs-comment">/*eslint-enable */</span>
	<span class="hljs-comment">/*jshint ignore:end */</span>
}(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">CRC32</span>) </span>{
CRC32.version = <span class="hljs-string">'1.2.2'</span>;
<span class="hljs-comment">/*global Int32Array */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">signed_crc_table</span>(<span class="hljs-params"></span>) </span>{
	<span class="hljs-keyword">var</span> c = <span class="hljs-number">0</span>, table = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-number">256</span>);

	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n =<span class="hljs-number">0</span>; n != <span class="hljs-number">256</span>; ++n){
		c = n;
		c = ((c&amp;<span class="hljs-number">1</span>) ? (<span class="hljs-number">-306674912</span> ^ (c &gt;&gt;&gt; <span class="hljs-number">1</span>)) : (c &gt;&gt;&gt; <span class="hljs-number">1</span>));
		c = ((c&amp;<span class="hljs-number">1</span>) ? (<span class="hljs-number">-306674912</span> ^ (c &gt;&gt;&gt; <span class="hljs-number">1</span>)) : (c &gt;&gt;&gt; <span class="hljs-number">1</span>));
		c = ((c&amp;<span class="hljs-number">1</span>) ? (<span class="hljs-number">-306674912</span> ^ (c &gt;&gt;&gt; <span class="hljs-number">1</span>)) : (c &gt;&gt;&gt; <span class="hljs-number">1</span>));
		c = ((c&amp;<span class="hljs-number">1</span>) ? (<span class="hljs-number">-306674912</span> ^ (c &gt;&gt;&gt; <span class="hljs-number">1</span>)) : (c &gt;&gt;&gt; <span class="hljs-number">1</span>));
		c = ((c&amp;<span class="hljs-number">1</span>) ? (<span class="hljs-number">-306674912</span> ^ (c &gt;&gt;&gt; <span class="hljs-number">1</span>)) : (c &gt;&gt;&gt; <span class="hljs-number">1</span>));
		c = ((c&amp;<span class="hljs-number">1</span>) ? (<span class="hljs-number">-306674912</span> ^ (c &gt;&gt;&gt; <span class="hljs-number">1</span>)) : (c &gt;&gt;&gt; <span class="hljs-number">1</span>));
		c = ((c&amp;<span class="hljs-number">1</span>) ? (<span class="hljs-number">-306674912</span> ^ (c &gt;&gt;&gt; <span class="hljs-number">1</span>)) : (c &gt;&gt;&gt; <span class="hljs-number">1</span>));
		c = ((c&amp;<span class="hljs-number">1</span>) ? (<span class="hljs-number">-306674912</span> ^ (c &gt;&gt;&gt; <span class="hljs-number">1</span>)) : (c &gt;&gt;&gt; <span class="hljs-number">1</span>));
		table[n] = c;
	}

	<span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Int32Array</span> !== <span class="hljs-string">'undefined'</span> ? <span class="hljs-keyword">new</span> <span class="hljs-built_in">Int32Array</span>(table) : table;
}

<span class="hljs-keyword">var</span> T0 = signed_crc_table();
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">slice_by_16_tables</span>(<span class="hljs-params">T</span>) </span>{
	<span class="hljs-keyword">var</span> c = <span class="hljs-number">0</span>, v = <span class="hljs-number">0</span>, n = <span class="hljs-number">0</span>, table = <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Int32Array</span> !== <span class="hljs-string">'undefined'</span> ? <span class="hljs-keyword">new</span> <span class="hljs-built_in">Int32Array</span>(<span class="hljs-number">4096</span>) : <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-number">4096</span>) ;

	<span class="hljs-keyword">for</span>(n = <span class="hljs-number">0</span>; n != <span class="hljs-number">256</span>; ++n) table[n] = T[n];
	<span class="hljs-keyword">for</span>(n = <span class="hljs-number">0</span>; n != <span class="hljs-number">256</span>; ++n) {
		v = T[n];
		<span class="hljs-keyword">for</span>(c = <span class="hljs-number">256</span> + n; c &lt; <span class="hljs-number">4096</span>; c += <span class="hljs-number">256</span>) v = table[c] = (v &gt;&gt;&gt; <span class="hljs-number">8</span>) ^ T[v &amp; <span class="hljs-number">0xFF</span>];
	}
	<span class="hljs-keyword">var</span> out = [];
	<span class="hljs-keyword">for</span>(n = <span class="hljs-number">1</span>; n != <span class="hljs-number">16</span>; ++n) out[n - <span class="hljs-number">1</span>] = <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Int32Array</span> !== <span class="hljs-string">'undefined'</span> ? table.subarray(n * <span class="hljs-number">256</span>, n * <span class="hljs-number">256</span> + <span class="hljs-number">256</span>) : table.slice(n * <span class="hljs-number">256</span>, n * <span class="hljs-number">256</span> + <span class="hljs-number">256</span>);
	<span class="hljs-keyword">return</span> out;
}
<span class="hljs-keyword">var</span> TT = slice_by_16_tables(T0);
<span class="hljs-keyword">var</span> T1 = TT[<span class="hljs-number">0</span>],  T2 = TT[<span class="hljs-number">1</span>],  T3 = TT[<span class="hljs-number">2</span>],  T4 = TT[<span class="hljs-number">3</span>],  T5 = TT[<span class="hljs-number">4</span>];
<span class="hljs-keyword">var</span> T6 = TT[<span class="hljs-number">5</span>],  T7 = TT[<span class="hljs-number">6</span>],  T8 = TT[<span class="hljs-number">7</span>],  T9 = TT[<span class="hljs-number">8</span>],  Ta = TT[<span class="hljs-number">9</span>];
<span class="hljs-keyword">var</span> Tb = TT[<span class="hljs-number">10</span>], Tc = TT[<span class="hljs-number">11</span>], Td = TT[<span class="hljs-number">12</span>], Te = TT[<span class="hljs-number">13</span>], Tf = TT[<span class="hljs-number">14</span>];
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">crc32_bstr</span>(<span class="hljs-params">bstr, seed</span>) </span>{
	<span class="hljs-keyword">var</span> C = seed ^ <span class="hljs-number">-1</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, L = bstr.length; i &lt; L;) C = (C&gt;&gt;&gt;<span class="hljs-number">8</span>) ^ T0[(C^bstr.charCodeAt(i++))&amp;<span class="hljs-number">0xFF</span>];
	<span class="hljs-keyword">return</span> ~C;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">crc32_buf</span>(<span class="hljs-params">B, seed</span>) </span>{
	<span class="hljs-keyword">var</span> C = seed ^ <span class="hljs-number">-1</span>, L = B.length - <span class="hljs-number">15</span>, i = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">for</span>(; i &lt; L;) C =
		Tf[B[i++] ^ (C &amp; <span class="hljs-number">255</span>)] ^
		Te[B[i++] ^ ((C &gt;&gt; <span class="hljs-number">8</span>) &amp; <span class="hljs-number">255</span>)] ^
		Td[B[i++] ^ ((C &gt;&gt; <span class="hljs-number">16</span>) &amp; <span class="hljs-number">255</span>)] ^
		Tc[B[i++] ^ (C &gt;&gt;&gt; <span class="hljs-number">24</span>)] ^
		Tb[B[i++]] ^ Ta[B[i++]] ^ T9[B[i++]] ^ T8[B[i++]] ^
		T7[B[i++]] ^ T6[B[i++]] ^ T5[B[i++]] ^ T4[B[i++]] ^
		T3[B[i++]] ^ T2[B[i++]] ^ T1[B[i++]] ^ T0[B[i++]];
	L += <span class="hljs-number">15</span>;
	<span class="hljs-keyword">while</span>(i &lt; L) C = (C&gt;&gt;&gt;<span class="hljs-number">8</span>) ^ T0[(C^B[i++])&amp;<span class="hljs-number">0xFF</span>];
	<span class="hljs-keyword">return</span> ~C;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">crc32_str</span>(<span class="hljs-params">str, seed</span>) </span>{
	<span class="hljs-keyword">var</span> C = seed ^ <span class="hljs-number">-1</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, L = str.length, c = <span class="hljs-number">0</span>, d = <span class="hljs-number">0</span>; i &lt; L;) {
		c = str.charCodeAt(i++);
		<span class="hljs-keyword">if</span>(c &lt; <span class="hljs-number">0x80</span>) {
			C = (C&gt;&gt;&gt;<span class="hljs-number">8</span>) ^ T0[(C^c)&amp;<span class="hljs-number">0xFF</span>];
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(c &lt; <span class="hljs-number">0x800</span>) {
			C = (C&gt;&gt;&gt;<span class="hljs-number">8</span>) ^ T0[(C ^ (<span class="hljs-number">192</span>|((c&gt;&gt;<span class="hljs-number">6</span>)&amp;<span class="hljs-number">31</span>)))&amp;<span class="hljs-number">0xFF</span>];
			C = (C&gt;&gt;&gt;<span class="hljs-number">8</span>) ^ T0[(C ^ (<span class="hljs-number">128</span>|(c&amp;<span class="hljs-number">63</span>)))&amp;<span class="hljs-number">0xFF</span>];
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(c &gt;= <span class="hljs-number">0xD800</span> &amp;&amp; c &lt; <span class="hljs-number">0xE000</span>) {
			c = (c&amp;<span class="hljs-number">1023</span>)+<span class="hljs-number">64</span>; d = str.charCodeAt(i++)&amp;<span class="hljs-number">1023</span>;
			C = (C&gt;&gt;&gt;<span class="hljs-number">8</span>) ^ T0[(C ^ (<span class="hljs-number">240</span>|((c&gt;&gt;<span class="hljs-number">8</span>)&amp;<span class="hljs-number">7</span>)))&amp;<span class="hljs-number">0xFF</span>];
			C = (C&gt;&gt;&gt;<span class="hljs-number">8</span>) ^ T0[(C ^ (<span class="hljs-number">128</span>|((c&gt;&gt;<span class="hljs-number">2</span>)&amp;<span class="hljs-number">63</span>)))&amp;<span class="hljs-number">0xFF</span>];
			C = (C&gt;&gt;&gt;<span class="hljs-number">8</span>) ^ T0[(C ^ (<span class="hljs-number">128</span>|((d&gt;&gt;<span class="hljs-number">6</span>)&amp;<span class="hljs-number">15</span>)|((c&amp;<span class="hljs-number">3</span>)&lt;&lt;<span class="hljs-number">4</span>)))&amp;<span class="hljs-number">0xFF</span>];
			C = (C&gt;&gt;&gt;<span class="hljs-number">8</span>) ^ T0[(C ^ (<span class="hljs-number">128</span>|(d&amp;<span class="hljs-number">63</span>)))&amp;<span class="hljs-number">0xFF</span>];
		} <span class="hljs-keyword">else</span> {
			C = (C&gt;&gt;&gt;<span class="hljs-number">8</span>) ^ T0[(C ^ (<span class="hljs-number">224</span>|((c&gt;&gt;<span class="hljs-number">12</span>)&amp;<span class="hljs-number">15</span>)))&amp;<span class="hljs-number">0xFF</span>];
			C = (C&gt;&gt;&gt;<span class="hljs-number">8</span>) ^ T0[(C ^ (<span class="hljs-number">128</span>|((c&gt;&gt;<span class="hljs-number">6</span>)&amp;<span class="hljs-number">63</span>)))&amp;<span class="hljs-number">0xFF</span>];
			C = (C&gt;&gt;&gt;<span class="hljs-number">8</span>) ^ T0[(C ^ (<span class="hljs-number">128</span>|(c&amp;<span class="hljs-number">63</span>)))&amp;<span class="hljs-number">0xFF</span>];
		}
	}
	<span class="hljs-keyword">return</span> ~C;
}
CRC32.table = T0;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>$FlowIgnore</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">CRC32.bstr = crc32_bstr;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>$FlowIgnore</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">CRC32.buf = crc32_buf;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>$FlowIgnore</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">CRC32.str = crc32_str;
}));

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
