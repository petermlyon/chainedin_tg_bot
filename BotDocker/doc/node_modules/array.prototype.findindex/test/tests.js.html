<!DOCTYPE html>
<html>
<head>
  <title>tests.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../doc-style.css" />
  <script src="../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../";
    var thisFile = "node_modules/array.prototype.findindex/test/tests.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>tests.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">var</span> canDistinguishSparseFromUndefined = <span class="hljs-number">0</span> <span class="hljs-keyword">in</span> [<span class="hljs-literal">undefined</span>]; <span class="hljs-comment">// IE 6 - 8 have a bug where this returns false.</span>

<span class="hljs-keyword">var</span> thrower = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'should not reach here'</span>);
};

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">findIndex, t</span>) </span>{
	<span class="hljs-keyword">var</span> list = [<span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">15</span>, <span class="hljs-number">20</span>];

	t.equal(
		findIndex(list, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{ <span class="hljs-keyword">return</span> item === <span class="hljs-number">15</span>; }),
		<span class="hljs-number">2</span>,
		<span class="hljs-string">'find index by predicate'</span>
	);
	t.equal(
		findIndex(list, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{ <span class="hljs-keyword">return</span> item === <span class="hljs-string">'a'</span>; }),
		<span class="hljs-number">-1</span>,
		<span class="hljs-string">'returns -1 when nothing matches'</span>
	);
	t[<span class="hljs-string">'throws'</span>](
		<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{ findIndex(list); },
		<span class="hljs-built_in">TypeError</span>,
		<span class="hljs-string">'throws without callback'</span>
	);

	<span class="hljs-keyword">var</span> context = {};
	<span class="hljs-keyword">var</span> foundIndex = findIndex(list, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">value, index, arr</span>) </span>{
		t.equal(list[index], value);
		t.deepEqual(list, arr);
		t.equal(<span class="hljs-keyword">this</span>, context, <span class="hljs-string">'receiver is as expected'</span>);
		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	}, context);
	t.equal(foundIndex, <span class="hljs-number">-1</span>, <span class="hljs-string">'receives all three arguments'</span>);

	<span class="hljs-keyword">var</span> arraylike = { <span class="hljs-number">0</span>: <span class="hljs-number">1</span>, <span class="hljs-number">1</span>: <span class="hljs-number">2</span>, <span class="hljs-number">2</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">length</span>: <span class="hljs-number">3</span> };
	t.equal(
		findIndex(arraylike, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{
			<span class="hljs-keyword">return</span> item === <span class="hljs-number">2</span>;
		}),
		<span class="hljs-number">1</span>,
		<span class="hljs-string">'works with an array-like object'</span>
	);

	t.equal(
		findIndex({ <span class="hljs-number">0</span>: <span class="hljs-number">1</span>, <span class="hljs-number">1</span>: <span class="hljs-number">2</span>, <span class="hljs-number">2</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">length</span>: <span class="hljs-number">-3</span> }, thrower),
		<span class="hljs-number">-1</span>,
		<span class="hljs-string">'works with an array-like object with negative length'</span>
	);

	t.test(<span class="hljs-string">'sparse arrays'</span>, { <span class="hljs-attr">skip</span>: !canDistinguishSparseFromUndefined }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">st</span>) </span>{
		st.test(<span class="hljs-string">'works with a sparse array'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s2t</span>) </span>{
			<span class="hljs-keyword">var</span> obj = [<span class="hljs-number">1</span>, , <span class="hljs-literal">undefined</span>]; <span class="hljs-comment">// eslint-disable-line no-sparse-arrays</span>
			s2t.notOk(<span class="hljs-number">1</span> <span class="hljs-keyword">in</span> obj);
			<span class="hljs-keyword">var</span> seen = [];
			<span class="hljs-keyword">var</span> foundSparse = findIndex(obj, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item, idx</span>) </span>{
				seen.push([idx, item]);
				<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
			});
			s2t.equal(foundSparse, <span class="hljs-number">-1</span>);
			s2t.deepEqual(seen, [[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">1</span>, <span class="hljs-literal">undefined</span>], [<span class="hljs-number">2</span>, <span class="hljs-literal">undefined</span>]]);

			s2t.end();
		});

		st.test(<span class="hljs-string">'works with a sparse array-like object'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s2t</span>) </span>{
			<span class="hljs-keyword">var</span> obj = { <span class="hljs-number">0</span>: <span class="hljs-number">1</span>, <span class="hljs-number">2</span>: <span class="hljs-literal">undefined</span>, <span class="hljs-attr">length</span>: <span class="hljs-number">3.2</span> };
			<span class="hljs-keyword">var</span> seen = [];
			<span class="hljs-keyword">var</span> foundSparse = findIndex(obj, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item, idx</span>) </span>{
				seen.push([idx, item]);
				<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
			});
			s2t.equal(foundSparse, <span class="hljs-number">-1</span>);
			s2t.deepEqual(seen, [[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">1</span>, <span class="hljs-literal">undefined</span>], [<span class="hljs-number">2</span>, <span class="hljs-literal">undefined</span>]]);

			s2t.end();
		});

		st.end();
	});
};

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
