<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/request-promise-core/README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#request-promise-core">request-promise-core</a>
      </div>

      <div class="heading h2">
        <a href="#installation-for-request@2.34">Installation for request@^2.34</a>
      </div>

      <div class="heading h2">
        <a href="#usage-for-request@2.34">Usage for request@^2.34</a>
      </div>

      <div class="heading h2">
        <a href="#installation-and-usage-for-request@next">Installation and Usage for request@next</a>
      </div>

      <div class="heading h2">
        <a href="#contributing">Contributing</a>
      </div>

      <div class="heading h2">
        <a href="#change-history">Change History</a>
      </div>

      <div class="heading h2">
        <a href="#license-isc">License (ISC)</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><a href="http://promisesaplus.com/">
    <img src="https://promises-aplus.github.io/promises-spec/assets/logo-small.png" align="right" alt="Promises/A+ logo" />
</a>
<div class="pilwrap" id="request-promise-core">
  <h1>
    <a href="#request-promise-core" name="request-promise-core" class="pilcrow"></a>
request-promise-core
  </h1>
</div>
<p><a href="https://gitter.im/request/request-promise?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://img.shields.io/badge/gitter-join_chat-blue.svg?style=flat-square&amp;maxAge=2592000" alt="Gitter"></a>
<a href="https://travis-ci.org/request/promise-core"><img src="https://img.shields.io/travis/request/promise-core/master.svg?style=flat-square&amp;maxAge=2592000" alt="Build Status"></a>
<a href="https://coveralls.io/r/request/promise-core"><img src="https://img.shields.io/coveralls/request/promise-core.svg?style=flat-square&amp;maxAge=2592000" alt="Coverage Status"></a>
<a href="https://david-dm.org/request/promise-core"><img src="https://img.shields.io/david/request/promise-core.svg?style=flat-square&amp;maxAge=2592000" alt="Dependency Status"></a>
<a href="https://snyk.io/test/npm/promise-core"><img src="https://snyk.io/test/npm/promise-core/badge.svg?style=flat-square&amp;maxAge=2592000" alt="Known Vulnerabilities"></a></p>
<p>This package is the core for the following packages:</p>
<ul>
<li><a href="https://github.com/request/request-promise"><code>request-promise</code></a></li>
<li><a href="https://github.com/request/request-promise-any"><code>request-promise-any</code></a></li>
<li><a href="https://github.com/request/request-promise-bluebird"><code>request-promise-bluebird</code></a></li>
<li><a href="https://github.com/request/request-promise-native"><code>request-promise-native</code></a></li>
</ul>
<p><code>request-promise-core</code> contains the core logic to add Promise support to <a href="https://github.com/request/request"><code>request</code></a>.</p>
<p>Please use one of the libraries above. It is only recommended to use this library directly, if you have very specific requirements.</p>
<div class="pilwrap" id="installation-for-request@2.34">
  <h2>
    <a href="#installation-for-request@2.34" name="installation-for-request@2.34" class="pilcrow"></a>
Installation for <code>request@^2.34</code>
  </h2>
</div>
<p>This module is installed via npm:</p>
<pre><code>npm install --save request
npm install --save request-promise-core
</code></pre>
<p><code>request</code> is defined as a peer-dependency and thus has to be installed separately.</p>
<div class="pilwrap" id="usage-for-request@2.34">
  <h2>
    <a href="#usage-for-request@2.34" name="usage-for-request@2.34" class="pilcrow"></a>
Usage for <code>request@^2.34</code>
  </h2>
</div>
<pre><code class="js"><span class="hljs-comment">// 1. Load the request library</span>

<span class="hljs-comment">// Only use a direct require if you are 100% sure that:</span>
<span class="hljs-comment">// - Your project does not use request directly. That is without the Promise capabilities by calling require('request').</span>
<span class="hljs-comment">// - Any of the installed libraries use request.</span>
<span class="hljs-comment">// ...because Request's prototype will be patched in step 2.</span>
<span class="hljs-comment">/* var request = require('request'); */</span>

<span class="hljs-comment">// Instead use:</span>
<span class="hljs-keyword">var</span> stealthyRequire = <span class="hljs-built_in">require</span>(<span class="hljs-string">'stealthy-require'</span>);
<span class="hljs-keyword">var</span> request = stealthyRequire(<span class="hljs-built_in">require</span>.cache, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>(<span class="hljs-string">'request'</span>);
});


<span class="hljs-comment">// 2. Add Promise support to request</span>

<span class="hljs-keyword">var</span> configure = <span class="hljs-built_in">require</span>(<span class="hljs-string">'request-promise-core/configure/request2'</span>);

configure({
    <span class="hljs-attr">request</span>: request,
	<span class="hljs-comment">// Pass your favorite ES6-compatible promise implementation</span>
    <span class="hljs-attr">PromiseImpl</span>: <span class="hljs-built_in">Promise</span>,
	<span class="hljs-comment">// Expose all methods of the promise instance you want to call on the request(...) call</span>
    <span class="hljs-attr">expose</span>: [
        <span class="hljs-string">'then'</span>,   <span class="hljs-comment">// Allows to use request(...).then(...)</span>
        <span class="hljs-string">'catch'</span>,  <span class="hljs-comment">// Allows to use request(...).catch(...)</span>
        <span class="hljs-string">'promise'</span> <span class="hljs-comment">// Allows to use request(...).promise() which returns the promise instance</span>
    ],
    <span class="hljs-comment">// Optional: Pass a callback that is called within the Promise constructor</span>
    <span class="hljs-attr">constructorMixin</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>{
        <span class="hljs-comment">// `this` is the request object</span>
        <span class="hljs-comment">// Additional arguments may be passed depending on the PromiseImpl used</span>
    }
});


<span class="hljs-comment">// 3. Use request with its promise capabilities</span>

<span class="hljs-comment">// E.g. crawl a web page:</span>
request(<span class="hljs-string">'http://www.google.com'</span>)
    .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">htmlString</span>) </span>{
        <span class="hljs-comment">// Process html...</span>
    })
    .catch(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
        <span class="hljs-comment">// Crawling failed...</span>
    });
</code></pre>
<div class="pilwrap" id="installation-and-usage-for-request@next">
  <h2>
    <a href="#installation-and-usage-for-request@next" name="installation-and-usage-for-request@next" class="pilcrow"></a>
Installation and Usage for <code>request@next</code>
  </h2>
</div>
<p><a href="https://github.com/request/request/issues/1982">Request Next</a> is still in alpha. However, <code>request-promise-core</code> is already designed to be compatible and ships with a configuration helper – <code>require('request-promise-core/configure/request-next')</code> – that is <a href="https://github.com/request/request-promise/blob/next/lib/rp.js">used by <code>request-promise</code></a> in its &quot;next&quot; branch.</p>
<div class="pilwrap" id="contributing">
  <h2>
    <a href="#contributing" name="contributing" class="pilcrow"></a>
Contributing
  </h2>
</div>
<p>To set up your development environment:</p>
<ol>
<li>clone the repo to your desktop,</li>
<li>in the shell <code>cd</code> to the main folder,</li>
<li>hit <code>npm install</code>,</li>
<li>hit <code>npm install gulp -g</code> if you haven't installed gulp globally yet, and</li>
<li>run <code>gulp dev</code>. (Or run <code>node ./node_modules/.bin/gulp dev</code> if you don't want to install gulp globally.)</li>
</ol>
<p><code>gulp dev</code> watches all source files and if you save some changes it will lint the code and execute all tests. The test coverage report can be viewed from <code>./coverage/lcov-report/index.html</code>.</p>
<p>If you want to debug a test you should use <code>gulp test-without-coverage</code> to run all tests without obscuring the code by the test coverage instrumentation.</p>
<div class="pilwrap" id="change-history">
  <h2>
    <a href="#change-history" name="change-history" class="pilcrow"></a>
Change History
  </h2>
</div>
<ul>
<li>1.1.3 (2019-11-03)
<ul>
<li>Security fix: bumped <code>lodash</code> to <code>^4.17.15</code>. See <a href="https://snyk.io/vuln/search?q=lodash&amp;type=npm">vulnerabilty reports</a>.
<em>(Thanks to @daniel-nagy for pull request <a href="https://github.com/request/promise-core/pull/20">#20</a> and thanks to @quetzaluz for reporting this in issue <a href="https://github.com/request/promise-core/issues/21">#21</a>.)</em></li>
</ul>
</li>
<li>1.1.2 (2019-02-14)
<ul>
<li>Security fix: bumped <code>lodash</code> to <code>^4.17.11</code>. See <a href="https://snyk.io/vuln/search?q=lodash&amp;type=npm">vulnerabilty reports</a>.
<em>(Thanks to @lucaswillering and @sam-warren-finnair for reporting this in issues <a href="https://github.com/request/promise-core/issues/12">#12</a> and <a href="https://github.com/request/promise-core/issues/13">#13</a> and thanks to @Alec321 for pull request <a href="https://github.com/request/promise-core/pull/14">#14</a>.)</em></li>
</ul>
</li>
<li>1.1.1 (2016-08-08)
<ul>
<li>Renamed package to <code>request-promise-core</code> because there were <a href="https://github.com/request/request-promise/issues/137">too</a> <a href="https://github.com/request/request-promise/issues/141">many</a> issues with the scoped package name <code>@request/promise-core</code></li>
</ul>
</li>
<li>1.1.0 (2016-07-30)
<ul>
<li>Added <code>constructorMixin</code> option to enable <a href="https://github.com/request/request-promise/pull/123">request/request-promise#123</a></li>
</ul>
</li>
<li>1.0.0 (2016-07-15)
<ul>
<li>All tests green, ready for prime time</li>
</ul>
</li>
<li>1.0.0-rc.1 (2016-07-10)
<ul>
<li>Reimplementation of core logic based on <code>request-promise@3.0.0</code></li>
<li>Plus <code>transform2xxOnly</code> option (fixes <a href="https://github.com/request/request-promise/issues/131">request/request-promise#131</a>)</li>
</ul>
</li>
</ul>
<div class="pilwrap" id="license-isc">
  <h2>
    <a href="#license-isc" name="license-isc" class="pilcrow"></a>
License (ISC)
  </h2>
</div>
<p>In case you never heard about the <a href="http://en.wikipedia.org/wiki/ISC_license">ISC license</a> it is functionally equivalent to the MIT license.</p>
<p>See the <a href="LICENSE.html">LICENSE file</a> for details.</p>
</div>
  </div>
</body>
</html>
