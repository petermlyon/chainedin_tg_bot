<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../doc-style.css" />
  <script src="../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../";
    var thisFile = "node_modules/@scure/bip32/README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#scure-bip32">scure-bip32</a>
      </div>

      <div class="heading h3">
        <a href="#this-library-belongs-to-scure">This library belongs to scure</a>
      </div>

      <div class="heading h2">
        <a href="#usage">Usage</a>
      </div>

      <div class="heading h2">
        <a href="#security">Security</a>
      </div>

      <div class="heading h2">
        <a href="#license">License</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="scure-bip32">
  <h1>
    <a href="#scure-bip32" name="scure-bip32" class="pilcrow"></a>
scure-bip32
  </h1>
</div>
<p>Audited &amp; minimal implementation of BIP32 hierarchical deterministic (HD) wallets over secp256k1.</p>
<ul>
<li>ðŸ”’ <a href="#security.html">Audited</a> by an independent security firm</li>
<li>ðŸ”» Tree-shaking-friendly: use only what's necessary, other code won't be included</li>
<li>ðŸ“¦ ESM and common.js</li>
<li>âž° Only 3 audited dependencies by the same author:
<a href="https://github.com/paulmillr/noble-curves">noble-curves</a>,
<a href="https://github.com/paulmillr/noble-hashes">noble-hashes</a>,
and <a href="https://github.com/paulmillr/scure-base">scure-base</a></li>
<li>ðŸª¶ 300 lines. 90KB with all dependencies</li>
</ul>
<p>Check out <a href="https://github.com/paulmillr/scure-bip39">scure-bip39</a> if you need mnemonic phrases.
See <a href="https://github.com/paulmillr/ed25519-keygen">ed25519-keygen</a> if you need SLIP-0010/BIP32 ed25519 hdkey implementation.</p>
<div class="pilwrap" id="this-library-belongs-to-scure">
  <h3>
    <a href="#this-library-belongs-to-scure" name="this-library-belongs-to-scure" class="pilcrow"></a>
This library belongs to <em>scure</em>
  </h3>
</div>
<blockquote>
<p><strong>scure</strong> â€” audited micro-libraries.</p>
</blockquote>
<ul>
<li>Zero or minimal dependencies</li>
<li>Highly readable TypeScript / JS code</li>
<li>PGP-signed releases and transparent NPM builds</li>
<li>Check out <a href="https://paulmillr.com/noble/#scure">homepage</a> &amp; all libraries:
<a href="https://github.com/paulmillr/scure-base">base</a>,
<a href="https://github.com/paulmillr/scure-bip32">bip32</a>,
<a href="https://github.com/paulmillr/scure-bip39">bip39</a>,
<a href="https://github.com/paulmillr/scure-btc-signer">btc-signer</a>,
<a href="https://github.com/paulmillr/scure-starknet">starknet</a></li>
</ul>
<div class="pilwrap" id="usage">
  <h2>
    <a href="#usage" name="usage" class="pilcrow"></a>
Usage
  </h2>
</div>
<blockquote>
<p>npm install @scure/bip32</p>
</blockquote>
<p>This module exports a single class <code>HDKey</code>, which should be used like this:</p>
<pre><code class="ts"><span class="hljs-keyword">import</span> { HDKey } <span class="hljs-keyword">from</span> <span class="hljs-string">"@scure/bip32"</span>;
<span class="hljs-keyword">const</span> hdkey1 = HDKey.fromMasterSeed(seed);
<span class="hljs-keyword">const</span> hdkey2 = HDKey.fromExtendedKey(base58key);
<span class="hljs-keyword">const</span> hdkey3 = HDKey.fromJSON({ xpriv: <span class="hljs-built_in">string</span> });

<span class="hljs-comment">// props</span>
[hdkey1.depth, hdkey1.index, hdkey1.chainCode];
<span class="hljs-built_in">console</span>.log(hdkey2.privateKey, hdkey2.publicKey);
<span class="hljs-built_in">console</span>.log(hdkey3.derive(<span class="hljs-string">"m/0/2147483647'/1"</span>));
<span class="hljs-keyword">const</span> sig = hdkey3.sign(hash);
hdkey3.verify(hash, sig);
</code></pre>
<p>Note: <code>chainCode</code> property is essentially a private part
of a secret &quot;master&quot; key, it should be guarded from unauthorized access.</p>
<p>The full API is:</p>
<pre><code class="ts"><span class="hljs-keyword">class</span> HDKey {
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> HARDENED_OFFSET: <span class="hljs-built_in">number</span>;
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> fromMasterSeed(seed: <span class="hljs-built_in">Uint8Array</span>, versions: Versions): HDKey;
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> fromExtendedKey(base58key: <span class="hljs-built_in">string</span>, versions: Versions): HDKey;
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> fromJSON(json: { xpriv: <span class="hljs-built_in">string</span> }): HDKey;

  readonly versions: Versions;
  readonly depth: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;
  readonly index: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;
  readonly chainCode: <span class="hljs-built_in">Uint8Array</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
  readonly parentFingerprint: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;

  <span class="hljs-keyword">get</span> fingerprint(): <span class="hljs-built_in">number</span>;
  <span class="hljs-keyword">get</span> identifier(): <span class="hljs-built_in">Uint8Array</span> | <span class="hljs-literal">undefined</span>;
  <span class="hljs-keyword">get</span> pubKeyHash(): <span class="hljs-built_in">Uint8Array</span> | <span class="hljs-literal">undefined</span>;
  <span class="hljs-keyword">get</span> privateKey(): <span class="hljs-built_in">Uint8Array</span> | <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">get</span> publicKey(): <span class="hljs-built_in">Uint8Array</span> | <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">get</span> privateExtendedKey(): <span class="hljs-built_in">string</span>;
  <span class="hljs-keyword">get</span> publicExtendedKey(): <span class="hljs-built_in">string</span>;

  derive(path: <span class="hljs-built_in">string</span>): HDKey;
  deriveChild(index: <span class="hljs-built_in">number</span>): HDKey;
  sign(hash: <span class="hljs-built_in">Uint8Array</span>): <span class="hljs-built_in">Uint8Array</span>;
  verify(hash: <span class="hljs-built_in">Uint8Array</span>, signature: <span class="hljs-built_in">Uint8Array</span>): <span class="hljs-built_in">boolean</span>;
  wipePrivateData(): <span class="hljs-keyword">this</span>;
}

<span class="hljs-keyword">interface</span> Versions {
  <span class="hljs-keyword">private</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-keyword">public</span>: <span class="hljs-built_in">number</span>;
}
</code></pre>
<p>The module implements <a href="https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki">bip32</a> standard:
check it out for additional documentation.</p>
<p>The implementation is loosely based on cryptocoinjs/hdkey, <a href="#LICENSE.html">which has MIT License</a>.</p>
<div class="pilwrap" id="security">
  <h2>
    <a href="#security" name="security" class="pilcrow"></a>
Security
  </h2>
</div>
<p>The library has been independently audited:</p>
<ul>
<li>at version 1.0.1, in Jan 2022, by <a href="https://cure53.de">cure53</a>
<ul>
<li>PDFs: <a href="https://cure53.de/pentest-report_hashing-libs.pdf">online</a>, <a href="./audit/2022-01-05-cure53-audit-nbl2.pdf.html">offline</a></li>
<li><a href="https://github.com/paulmillr/scure-bip32/compare/1.0.0..main">Changes since audit</a>.</li>
<li>The audit has been funded by <a href="https://ethereum.org/en/">Ethereum Foundation</a> with help of <a href="https://nomiclabs.io">Nomic Labs</a></li>
</ul>
</li>
</ul>
<p>The library was initially developed for <a href="https://github.com/ethereum/js-ethereum-cryptography">js-ethereum-cryptography</a>.
At commit <a href="https://github.com/ethereum/js-ethereum-cryptography/commit/ae00e6d7d24fb3c76a1c7fe10039f6ecd120b77e">ae00e6d7</a>,
it was extracted to a separate package called <code>micro-bip32</code>.
After the audit we've decided to use <code>@scure</code> NPM namespace for security.</p>
<div class="pilwrap" id="license">
  <h2>
    <a href="#license" name="license" class="pilcrow"></a>
License
  </h2>
</div>
<p><a href="./LICENSE.html">MIT License</a></p>
<p>Copyright (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com)</p>
</div>
  </div>
</body>
</html>
