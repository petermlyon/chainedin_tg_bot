<!DOCTYPE html>
<html>
<head>
  <title>utils.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../doc-style.css" />
  <script src="../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../";
    var thisFile = "node_modules/@noble/hashes/utils.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#sourcemappingurlutils.js.map">sourceMappingURL=utils.js.map</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>utils.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">"use strict"</span>;
<span class="hljs-comment">/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */</span>
<span class="hljs-built_in">Object</span>.defineProperty(exports, <span class="hljs-string">"__esModule"</span>, { <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span> });
exports.randomBytes = exports.wrapXOFConstructorWithOpts = exports.wrapConstructorWithOpts = exports.wrapConstructor = exports.checkOpts = exports.Hash = exports.concatBytes = exports.toBytes = exports.utf8ToBytes = exports.asyncLoop = exports.nextTick = exports.hexToBytes = exports.bytesToHex = exports.byteSwap32 = exports.byteSwapIfBE = exports.byteSwap = exports.isLE = exports.rotl = exports.rotr = exports.createView = exports.u32 = exports.u8 = exports.isBytes = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.
node.js versions earlier than v19 don't declare it in global scope.
For node.js, package.json#exports field mapping rewrites import
from <code>crypto</code> to <code>cryptoNode</code>, which imports native module.
Makes the utils un-importable in browsers without a bundler.
Once node.js 18 is deprecated (2025-04-30), we can just drop the import.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> crypto_1 = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@noble/hashes/crypto"</span>);
<span class="hljs-keyword">const</span> _assert_js_1 = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./_assert.js"</span>);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>export { isBytes } from './_assert.js';
We can't reuse isBytes from _assert, because somehow this causes huge perf issues</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isBytes</span>(<span class="hljs-params">a</span>) </span>{
    <span class="hljs-keyword">return</span> (a <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Uint8Array</span> ||
        (a != <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-keyword">typeof</span> a === <span class="hljs-string">'object'</span> &amp;&amp; a.constructor.name === <span class="hljs-string">'Uint8Array'</span>));
}
exports.isBytes = isBytes;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>Cast array to different type</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> u8 = <span class="hljs-function">(<span class="hljs-params">arr</span>) =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(arr.buffer, arr.byteOffset, arr.byteLength);
exports.u8 = u8;
<span class="hljs-keyword">const</span> u32 = <span class="hljs-function">(<span class="hljs-params">arr</span>) =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint32Array</span>(arr.buffer, arr.byteOffset, <span class="hljs-built_in">Math</span>.floor(arr.byteLength / <span class="hljs-number">4</span>));
exports.u32 = u32;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>Cast array to view</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> createView = <span class="hljs-function">(<span class="hljs-params">arr</span>) =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">DataView</span>(arr.buffer, arr.byteOffset, arr.byteLength);
exports.createView = createView;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>The rotate right (circular right shift) operation for uint32</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> rotr = <span class="hljs-function">(<span class="hljs-params">word, shift</span>) =&gt;</span> (word &lt;&lt; (<span class="hljs-number">32</span> - shift)) | (word &gt;&gt;&gt; shift);
exports.rotr = rotr;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<p>The rotate left (circular left shift) operation for uint32</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> rotl = <span class="hljs-function">(<span class="hljs-params">word, shift</span>) =&gt;</span> (word &lt;&lt; shift) | ((word &gt;&gt;&gt; (<span class="hljs-number">32</span> - shift)) &gt;&gt;&gt; <span class="hljs-number">0</span>);
exports.rotl = rotl;
exports.isLE = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint32Array</span>([<span class="hljs-number">0x11223344</span>]).buffer)[<span class="hljs-number">0</span>] === <span class="hljs-number">0x44</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<p>The byte swap operation for uint32</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> byteSwap = <span class="hljs-function">(<span class="hljs-params">word</span>) =&gt;</span> ((word &lt;&lt; <span class="hljs-number">24</span>) &amp; <span class="hljs-number">0xff000000</span>) |
    ((word &lt;&lt; <span class="hljs-number">8</span>) &amp; <span class="hljs-number">0xff0000</span>) |
    ((word &gt;&gt;&gt; <span class="hljs-number">8</span>) &amp; <span class="hljs-number">0xff00</span>) |
    ((word &gt;&gt;&gt; <span class="hljs-number">24</span>) &amp; <span class="hljs-number">0xff</span>);
exports.byteSwap = byteSwap;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<p>Conditionally byte swap if on a big-endian platform</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">exports.byteSwapIfBE = exports.isLE ? <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> n : <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> (<span class="hljs-number">0</span>, exports.byteSwap)(n);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<p>In place byte swap for Uint32Array</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">byteSwap32</span>(<span class="hljs-params">arr</span>) </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arr.length; i++) {
        arr[i] = (<span class="hljs-number">0</span>, exports.byteSwap)(arr[i]);
    }
}
exports.byteSwap32 = byteSwap32;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<p>Array where index 0xf0 (240) is mapped to string 'f0'</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> hexes = <span class="hljs-comment">/* @__PURE__ */</span> <span class="hljs-built_in">Array</span>.from({ <span class="hljs-attr">length</span>: <span class="hljs-number">256</span> }, (_, i) =&gt; i.toString(<span class="hljs-number">16</span>).padStart(<span class="hljs-number">2</span>, <span class="hljs-string">'0'</span>));
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bytesToHex</span>(<span class="hljs-params">bytes</span>) </span>{
    (<span class="hljs-number">0</span>, _assert_js_1.bytes)(bytes);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<p>pre-caching improves the speed 6x</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">let</span> hex = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bytes.length; i++) {
        hex += hexes[bytes[i]];
    }
    <span class="hljs-keyword">return</span> hex;
}
exports.bytesToHex = bytesToHex;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<p>We use optimized technique to convert hex string to byte array</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> asciis = { <span class="hljs-attr">_0</span>: <span class="hljs-number">48</span>, <span class="hljs-attr">_9</span>: <span class="hljs-number">57</span>, <span class="hljs-attr">_A</span>: <span class="hljs-number">65</span>, <span class="hljs-attr">_F</span>: <span class="hljs-number">70</span>, <span class="hljs-attr">_a</span>: <span class="hljs-number">97</span>, <span class="hljs-attr">_f</span>: <span class="hljs-number">102</span> };
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">asciiToBase16</span>(<span class="hljs-params">char</span>) </span>{
    <span class="hljs-keyword">if</span> (char &gt;= asciis._0 &amp;&amp; char &lt;= asciis._9)
        <span class="hljs-keyword">return</span> char - asciis._0;
    <span class="hljs-keyword">if</span> (char &gt;= asciis._A &amp;&amp; char &lt;= asciis._F)
        <span class="hljs-keyword">return</span> char - (asciis._A - <span class="hljs-number">10</span>);
    <span class="hljs-keyword">if</span> (char &gt;= asciis._a &amp;&amp; char &lt;= asciis._f)
        <span class="hljs-keyword">return</span> char - (asciis._a - <span class="hljs-number">10</span>);
    <span class="hljs-keyword">return</span>;
}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hexToBytes</span>(<span class="hljs-params">hex</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> hex !== <span class="hljs-string">'string'</span>)
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'hex string expected, got '</span> + <span class="hljs-keyword">typeof</span> hex);
    <span class="hljs-keyword">const</span> hl = hex.length;
    <span class="hljs-keyword">const</span> al = hl / <span class="hljs-number">2</span>;
    <span class="hljs-keyword">if</span> (hl % <span class="hljs-number">2</span>)
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'padded hex string expected, got unpadded hex of length '</span> + hl);
    <span class="hljs-keyword">const</span> array = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(al);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> ai = <span class="hljs-number">0</span>, hi = <span class="hljs-number">0</span>; ai &lt; al; ai++, hi += <span class="hljs-number">2</span>) {
        <span class="hljs-keyword">const</span> n1 = asciiToBase16(hex.charCodeAt(hi));
        <span class="hljs-keyword">const</span> n2 = asciiToBase16(hex.charCodeAt(hi + <span class="hljs-number">1</span>));
        <span class="hljs-keyword">if</span> (n1 === <span class="hljs-literal">undefined</span> || n2 === <span class="hljs-literal">undefined</span>) {
            <span class="hljs-keyword">const</span> char = hex[hi] + hex[hi + <span class="hljs-number">1</span>];
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'hex string expected, got non-hex character "'</span> + char + <span class="hljs-string">'" at index '</span> + hi);
        }
        array[ai] = n1 * <span class="hljs-number">16</span> + n2;
    }
    <span class="hljs-keyword">return</span> array;
}
exports.hexToBytes = hexToBytes;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<p>There is no setImmediate in browser and setTimeout is slow.
call of async fn will return Promise, which will be fullfiled only on
next scheduler queue processing step and this is exactly what we need.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> nextTick = <span class="hljs-keyword">async</span> () =&gt; { };
exports.nextTick = nextTick;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<p>Returns control to thread each 'tick' ms to avoid blocking</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">asyncLoop</span>(<span class="hljs-params">iters, tick, cb</span>) </span>{
    <span class="hljs-keyword">let</span> ts = <span class="hljs-built_in">Date</span>.now();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; iters; i++) {
        cb(i);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<p>Date.now() is not monotonic, so in case if clock goes backwards we return return control too</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">const</span> diff = <span class="hljs-built_in">Date</span>.now() - ts;
        <span class="hljs-keyword">if</span> (diff &gt;= <span class="hljs-number">0</span> &amp;&amp; diff &lt; tick)
            <span class="hljs-keyword">continue</span>;
        <span class="hljs-keyword">await</span> (<span class="hljs-number">0</span>, exports.nextTick)();
        ts += diff;
    }
}
exports.asyncLoop = asyncLoop;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">utf8ToBytes</span>(<span class="hljs-params">str</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> str !== <span class="hljs-string">'string'</span>)
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`utf8ToBytes expected string, got <span class="hljs-subst">${<span class="hljs-keyword">typeof</span> str}</span>`</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(<span class="hljs-keyword">new</span> TextEncoder().encode(str)); <span class="hljs-comment">// https://bugzil.la/1681809</span>
}
exports.utf8ToBytes = utf8ToBytes;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<div class="dox">
<div class="summary">
<p>Normalizes (non-hex) string or Uint8Array to Uint8Array.
Warning: when Uint8Array is passed, it would NOT get copied.
Keep in mind for future mutable operations.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toBytes</span>(<span class="hljs-params">data</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'string'</span>)
        data = utf8ToBytes(data);
    (<span class="hljs-number">0</span>, _assert_js_1.bytes)(data);
    <span class="hljs-keyword">return</span> data;
}
exports.toBytes = toBytes;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<div class="dox">
<div class="summary">
<p>Copies several Uint8Arrays into one.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">concatBytes</span>(<span class="hljs-params">...arrays</span>) </span>{
    <span class="hljs-keyword">let</span> sum = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arrays.length; i++) {
        <span class="hljs-keyword">const</span> a = arrays[i];
        (<span class="hljs-number">0</span>, _assert_js_1.bytes)(a);
        sum += a.length;
    }
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(sum);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, pad = <span class="hljs-number">0</span>; i &lt; arrays.length; i++) {
        <span class="hljs-keyword">const</span> a = arrays[i];
        res.set(a, pad);
        pad += a.length;
    }
    <span class="hljs-keyword">return</span> res;
}
exports.concatBytes = concatBytes;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<p>For runtime check if class implements interface</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Hash</span> </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<p>Safe version that clones internal state</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    clone() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._cloneInto();
    }
}
exports.Hash = Hash;
<span class="hljs-keyword">const</span> toStr = {}.toString;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkOpts</span>(<span class="hljs-params">defaults, opts</span>) </span>{
    <span class="hljs-keyword">if</span> (opts !== <span class="hljs-literal">undefined</span> &amp;&amp; toStr.call(opts) !== <span class="hljs-string">'[object Object]'</span>)
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Options should be object or undefined'</span>);
    <span class="hljs-keyword">const</span> merged = <span class="hljs-built_in">Object</span>.assign(defaults, opts);
    <span class="hljs-keyword">return</span> merged;
}
exports.checkOpts = checkOpts;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">wrapConstructor</span>(<span class="hljs-params">hashCons</span>) </span>{
    <span class="hljs-keyword">const</span> hashC = <span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span> hashCons().update(toBytes(msg)).digest();
    <span class="hljs-keyword">const</span> tmp = hashCons();
    hashC.outputLen = tmp.outputLen;
    hashC.blockLen = tmp.blockLen;
    hashC.create = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> hashCons();
    <span class="hljs-keyword">return</span> hashC;
}
exports.wrapConstructor = wrapConstructor;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">wrapConstructorWithOpts</span>(<span class="hljs-params">hashCons</span>) </span>{
    <span class="hljs-keyword">const</span> hashC = <span class="hljs-function">(<span class="hljs-params">msg, opts</span>) =&gt;</span> hashCons(opts).update(toBytes(msg)).digest();
    <span class="hljs-keyword">const</span> tmp = hashCons({});
    hashC.outputLen = tmp.outputLen;
    hashC.blockLen = tmp.blockLen;
    hashC.create = <span class="hljs-function">(<span class="hljs-params">opts</span>) =&gt;</span> hashCons(opts);
    <span class="hljs-keyword">return</span> hashC;
}
exports.wrapConstructorWithOpts = wrapConstructorWithOpts;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">wrapXOFConstructorWithOpts</span>(<span class="hljs-params">hashCons</span>) </span>{
    <span class="hljs-keyword">const</span> hashC = <span class="hljs-function">(<span class="hljs-params">msg, opts</span>) =&gt;</span> hashCons(opts).update(toBytes(msg)).digest();
    <span class="hljs-keyword">const</span> tmp = hashCons({});
    hashC.outputLen = tmp.outputLen;
    hashC.blockLen = tmp.blockLen;
    hashC.create = <span class="hljs-function">(<span class="hljs-params">opts</span>) =&gt;</span> hashCons(opts);
    <span class="hljs-keyword">return</span> hashC;
}
exports.wrapXOFConstructorWithOpts = wrapXOFConstructorWithOpts;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<div class="dox">
<div class="summary">
<p>Secure PRNG. Uses <code>crypto.getRandomValues</code>, which defers to OS.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">randomBytes</span>(<span class="hljs-params">bytesLength = <span class="hljs-number">32</span></span>) </span>{
    <span class="hljs-keyword">if</span> (crypto_1.crypto &amp;&amp; <span class="hljs-keyword">typeof</span> crypto_1.crypto.getRandomValues === <span class="hljs-string">'function'</span>) {
        <span class="hljs-keyword">return</span> crypto_1.crypto.getRandomValues(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(bytesLength));
    }
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'crypto.getRandomValues must be defined'</span>);
}
exports.randomBytes = randomBytes;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="sourcemappingurlutils.js.map">
  <h1>
    <a href="#sourcemappingurlutils.js.map" name="sourcemappingurlutils.js.map" class="pilcrow"></a>
sourceMappingURL=utils.js.map
  </h1>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"></pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
